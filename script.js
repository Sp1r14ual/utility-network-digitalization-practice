var map = L.map('map').setView([55.146327, 79.675607], 13);

L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
  maxZoom: 19,
  attribution:
    '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>',
}).addTo(map);

var town = L.marker([55.146327, 79.675607]).addTo(map);

var well = L.circle([55.14132, 79.6776], {
  color: 'blue',
  fillColor: 'blue',
  fillOpacity: 0.5,
  radius: 10,
}).addTo(map);

town.bindPopup('д. Каменка').openPopup();
well.bindPopup('Скважина');

var streets = {
  Центральная: [
    [55.15094, 79.66936],
    [55.14055, 79.67943],
    [55.14029, 79.67958],
    [55.13952, 79.67956],
  ],
  Широкая: [
    [55.14576, 79.67051],
    [55.14521, 79.67121],
    [55.14439, 79.67159],
    [55.14362, 79.67214],
    [55.14311, 79.67251],
  ],
  Школьная: [
    [55.15027, 79.67501],
    [55.14967, 79.67531],
    [55.14923, 79.67545],
    [55.14863, 79.67557],
    [55.14797, 79.6758],
    [55.14743, 79.6762],
    [55.14745, 79.67618],
    [55.14674, 79.67686],
    [55.14592, 79.67774],
    [55.14467, 79.67912],
    [55.14427, 79.67956],
  ],
};

var graph_coords = [
  //ул. Центральная
  [
    [55.15094, 79.66936],
    [55.14055, 79.67943],
    [55.14029, 79.67958],
    [55.13952, 79.67956],
  ],
  [
    [55.15099, 79.66889],
    [55.15094, 79.66936],
  ],
  [
    [55.1505, 79.66943],
    [55.15019, 79.67009],
  ],
  [
    [55.15008, 79.66979],
    [55.15019, 79.67009],
  ],
  [
    [55.14988, 79.66998],
    [55.15019, 79.67009],
  ],
  [
    [55.14958, 79.67113],
    [55.14948, 79.67078],
  ],
  [
    [55.14926, 79.67061],
    [55.14948, 79.67078],
  ],
  [
    [55.14853, 79.67125],
    [55.14853, 79.67171],
  ],
  [
    [55.14786, 79.67194],
    [55.14795, 79.67228],
  ],
  [
    [55.147, 79.6728],
    [55.14698, 79.67323],
  ],
  [
    [55.14665, 79.67312],
    [55.14698, 79.67323],
  ],
  [
    [55.14697, 79.67364],
    [55.14698, 79.67323],
  ],
  [
    [55.14612, 79.67364],
    [55.14614, 79.67403],
  ],
  [
    [55.14657, 79.67404],
    [55.14614, 79.67403],
  ],
  [
    [55.14639, 79.67419],
    [55.14614, 79.67403],
  ],
  //Колодец без подключения
  [[55.14561, 79.67454]],
  [
    [55.14495, 79.6748],
    [55.14482, 79.67529],
  ],
  [
    [55.14348, 79.67608],
    [55.14367, 79.67639],
  ],
  [
    [55.143, 79.67747],
    [55.14316, 79.67687],
  ],
  [
    [55.14216, 79.67751],
    [55.14255, 79.67748],
  ],
  //главная скважина
  [
    [55.14132, 79.6776],
    [55.14153, 79.67847],
  ],
  [
    [55.14061, 79.67972],
    [55.14055, 79.67943],
  ],
  [
    [55.13953, 79.67923],
    [55.13952, 79.67956],
  ],
  //ул. Широкая
  [
    [55.14576, 79.67051],
    [55.14521, 79.67121],
    [55.14439, 79.67159],
    [55.14362, 79.67214],
    [55.14311, 79.67251],
  ],
  [
    [55.14526, 79.67077],
    [55.14521, 79.67121],
  ],
  [
    [55.14449, 79.67125],
    [55.14521, 79.67121],
  ],
  [
    [55.14349, 79.67184],
    [55.14311, 79.67251],
  ],
  [
    [55.14305, 79.67293],
    [55.14311, 79.67251],
  ],
  //ул. Школьная
  [
    [55.15027, 79.67501],
    [55.14967, 79.67531],
    [55.14923, 79.67545],
    [55.14863, 79.67557],
    [55.14797, 79.6758],
    [55.14743, 79.6762],
    [55.14745, 79.67618],
    [55.14674, 79.67686],
    [55.14592, 79.67774],
    [55.14467, 79.67912],
    [55.14427, 79.67956],
  ],
  [
    [55.15032, 79.67556],
    [55.15027, 79.67501],
  ],
  [
    [55.14992, 79.67571],
    [55.14973, 79.67528],
  ],
  //Колодец без подключения
  [[55.14864, 79.67557]],
  [
    [55.14688, 79.67728],
    [55.14675, 79.67685],
  ],
  //Колодец без подключения
  [[55.14549, 79.67822]],
  [
    [55.14495, 79.6793],
    [55.14465, 79.67914],
  ],
  [
    [55.14478, 79.67949],
    [55.14465, 79.67914],
  ],
  //Колодец без подключения
  [[55.14427, 79.67956]],
  //Перемычки между улицами
  [
    [55.14367, 79.67639],
    [55.14465, 79.67914],
  ],
  [
    [55.14361, 79.67214],
    [55.14409, 79.67346],
    [55.14482, 79.67529],
  ],
];

var polyline = L.polyline(graph_coords, { color: '#5d9cf7' }).addTo(map);

// zoom the map to the polyline
map.fitBounds(polyline.getBounds());
